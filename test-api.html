<!DOCTYPE html>
<html>
<head>
    <title>Staff API Test</title>
</head>
<body>
    <h1>Testing Staff API</h1>
    <div id="results"></div>
    
    <script>
// Quick test to validate the API fixes
async function testStaffAPI() {
  const resultsDiv = document.getElementById('results');
  
  try {
    resultsDiv.innerHTML += '<p>üîç Testing Staff API with proper format...</p>';
    
    // Test data with proper formatting
    const testData = {
      id: 'STF998',
      name: 'API Test Staff',
      email: 'apitest@example.com',
      phone: '9876543210',
      address: 'API Test Address',
      role: 'Test Now',
      category_id: 1, // Test with a category ID
      department: 'Administration',
      join_date: '2025-08-22', // Proper MySQL date format
      salary: 30000,
      status: 'Active',
      photo: '',
      documents: {}
    };

    resultsDiv.innerHTML += '<p>üì§ Sending test data: ' + JSON.stringify(testData, null, 2) + '</p>';

    const response = await fetch('http://localhost:4000/api/staff', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(testData)
    });

    resultsDiv.innerHTML += '<p>üì° Response status: ' + response.status + '</p>';
    
    if (response.ok) {
      const result = await response.json();
      resultsDiv.innerHTML += '<p>‚úÖ Staff created successfully: ' + JSON.stringify(result, null, 2) + '</p>';
      
      // Clean up - delete the test staff
      await fetch(`http://localhost:4000/api/staff/${testData.id}`, {
        method: 'DELETE'
      });
      resultsDiv.innerHTML += '<p>üßπ Test data cleaned up</p>';
    } else {
      const error = await response.text();
      resultsDiv.innerHTML += '<p>‚ùå API Error: ' + error + '</p>';
    }
    
  } catch (error) {
    resultsDiv.innerHTML += '<p>‚ùå Test failed: ' + error.message + '</p>';
  }
}

// Run test on page load
testStaffAPI();
    </script>
</body>
</html>
